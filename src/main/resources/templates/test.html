<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <meta charset="UTF-8">
    <title>SSE í…ŒìŠ¤íŠ¸</title>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const eventSource = new EventSource("http://localhost:8080/api/sse/subscribe");

            eventSource.onopen = function () {
                console.log("âœ… SSE ì—°ê²°ë¨");
                document.getElementById("status").textContent = "âœ… SSE ì—°ê²°ë¨";
            };

            eventSource.onerror = function (err) {
                console.error("âŒ SSE ì—ëŸ¬ ë°œìƒ:", err);
                document.getElementById("status").textContent = "âŒ SSE ì—°ê²° ëŠê¹€ ë˜ëŠ” ì˜¤ë¥˜";
            };

            eventSource.addEventListener("alarm", function (event) {
                const msg = event.data;
                console.log("ğŸ”” ì•Œë¦¼:", msg);
                const messageBox = document.getElementById("messages");
                const div = document.createElement("div");
                div.textContent = "ğŸ“¢ ì•Œë¦¼ ë„ì°©: " + msg;
                messageBox.appendChild(div);
            });
        });
    </script>
</head>
<body>
<h1>SSE ì—°ê²° ìƒíƒœ: <span id="status">ì—°ê²° ì¤‘...</span></h1>
<div id="messages">
    <h2>ì•Œë¦¼ ë©”ì‹œì§€</h2>
</div>
</body>
</html>
